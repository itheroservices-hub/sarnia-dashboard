# Pre-Deployment Fixes

## Issue 1: CBSA Scraper Not Running âš ï¸

**Problem:** Line 34 in `server.js` has the CBSA scraper import commented out, but line 143 tries to call `runScraper()`.

**Impact:** Server will crash with `ReferenceError: runScraper is not defined`

**Fix:** Uncomment the scraper import on line 34

---

## Issue 2: Events Scraper Import Commented Out

**Problem:** Line 35 in `server.js` has events scraper commented out, but lines 172-175 try to use it.

**Impact:** Events scraper won't run (but code has a safety check, so won't crash)

**Fix:** Either uncomment line 35 OR remove the events scraper logic

---

## Quick Fixes Required Before Deployment

### Fix 1: Enable CBSA Scraper
**File:** `server.js` (Line 34)

**Change:**
```javascript
// const { runScraper } = require('./CBSA Scraper/scraper');
```

**To:**
```javascript
const { runScraper } = require('./CBSA Scraper/scraper');
```

---

### Fix 2: Enable Events Scraper (Optional)
**File:** `server.js` (Line 35)

**Change:**
```javascript
// const { runEventsScraper } = require('./community events scraper/scraper');
```

**To:**
```javascript
const { runEventsScraper } = require('./community events scraper/scraper');
```

**OR** remove the events scraper logic (lines 172-176 in `runAllScrapers()`)

---

### Fix 3: Update Server Listen Message
**File:** `server.js` (Line 207)

**Change:**
```javascript
console.log(`ğŸš€ Server running at http://192.168.2.38:${PORT}`);
```

**To:**
```javascript
console.log(`ğŸš€ Server running on port ${PORT}`);
```

---

## Create .gitignore

Create a file named `.gitignore` in the project root:

```
node_modules/
.env
*.log
.DS_Store
npm-debug.log*
```

---

## Optional: Environment Variables

If you want to secure the OpenWeatherMap API key:

1. Create `.env` file:
```
OPENWEATHER_API_KEY=358109cc7c1d67419364bfdde1dbc335
PORT=3000
```

2. Update `public/script.js` to fetch weather from backend endpoint instead of direct API call

---

## Files Ready for Deployment

### Frontend (public/)
âœ… `index.html` - Main dashboard  
âœ… `script.js` - Frontend logic  
âœ… `style-dashboard.css` - Styling  
âœ… `events.js` - Event handling  
âœ… `assets/` - Static images

### Backend
âœ… `server.js` - Express server (needs fixes above)  
âœ… `package.json` - Dependencies  
âœ… All scrapers properly structured

### Data Files (Generated at Runtime)
ğŸ”„ `border_waits.json` - Generated by CBSA scraper  
ğŸ”„ `public/via_rail.json` - Generated by VIA Rail scraper  
ğŸ”„ `public/sarnia_events.json` - Generated by events scraper  
ğŸ”„ `public/news.json` - Generated by news scraper

---

## Pre-Flight Checklist

- [ ] Uncomment line 34 in `server.js` (CBSA scraper)
- [ ] Uncomment line 35 in `server.js` (Events scraper) OR remove usage
- [ ] Update server listen message (line 207)
- [ ] Create `.gitignore` file
- [ ] Test locally: `npm install && npm start`
- [ ] Verify http://localhost:3000 loads dashboard
- [ ] Check all scrapers run without errors
- [ ] Commit to Git
- [ ] Push to GitHub
- [ ] Ready for Render deployment! ğŸš€
